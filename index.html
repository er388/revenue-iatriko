<!DOCTYPE html>
<html lang="el">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Διαχείριση Εσόδων - Διαγνωστικό Εργαστήριο</title>
    <link rel="stylesheet" href="styles.css">
    
    <!-- CDN Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.0/chart.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <h1>Διαχείριση Εσόδων</h1>
            <div class="header-actions">
                <span id="userLabel" class="user-label">Χρήστης: Admin</span>
                <span id="autosaveIndicator" class="autosave-indicator" style="display: none;">Αποθηκεύτηκε</span>
                <button id="themeToggle" class="btn-icon" title="Αλλαγή θέματος">🌓</button>
                <button id="backupBtn" class="btn-secondary">💾 Backup</button>
            </div>
        </div>
    </header>

    <!-- Main Navigation -->
    <nav class="nav-tabs">
        <div class="container">
            <button class="nav-tab active" data-view="dashboard">📊 Dashboard</button>
            <button class="nav-tab" data-view="entries">📋 Εγγραφές</button>
            <button class="nav-tab" data-view="reports">📈 Αναφορές</button>
            <button class="nav-tab" data-view="comparison">🔄 Σύγκριση</button>
            <button class="nav-tab" data-view="forecasting">🔮 Προβλέψεις</button>
            <button class="nav-tab" data-view="heatmaps">🌡️ Heatmaps</button>
            <button class="nav-tab" data-view="cloud">☁️ Cloud</button>
            <button class="nav-tab" data-view="settings">⚙️ Ρυθμίσεις</button>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="container main-content">
        
        <!-- Dashboard View -->
        <div id="dashboardView" class="view active">
            <div class="dashboard-header">
                <h2>Επισκόπηση</h2>
                <div class="quick-filters">
                    <select id="dashPeriod" class="form-select">
                        <option value="today">Σήμερα</option>
                        <option value="week">Εβδομάδα</option>
                        <option value="month" selected>Μήνας</option>
                        <option value="year">Έτος</option>
                        <option value="all">Όλα</option>
                    </select>
                    <label class="checkbox-label">
                        <input type="checkbox" id="dashIncludeClawback" checked>
                        <span>Με Clawback (ΕΟΠΥΥ)</span>
                    </label>
                </div>
            </div>

            <!-- KPIs -->
            <div class="kpi-grid">
                <div class="kpi-card">
                    <div class="kpi-label">Συνολικά Έσοδα</div>
                    <div class="kpi-value" id="kpiTotal">€ 0,00</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-label">Μετρητά & Κάρτες</div>
                    <div class="kpi-value" id="kpiCash">€ 0,00</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-label">Τιμολόγια</div>
                    <div class="kpi-value" id="kpiInvoices">€ 0,00</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-label">Κρατήσεις</div>
                    <div class="kpi-value" id="kpiRetentions">€ 0,00</div>
                </div>
            </div>

            <!-- Quick Add Form -->
            <div class="card">
                <h3>Γρήγορη Καταχώριση</h3>
                <form id="quickAddForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label>Ημερομηνία (ΜΜ/ΕΕΕΕ)*</label>
                            <input type="text" id="quickDate" class="form-input" placeholder="01/2025" required>
                        </div>
                        <div class="form-group">
                            <label>Διαγνωστικό (Πηγή)*</label>
                            <div class="input-with-add">
                                <select id="quickSource" class="form-select" required>
                                    <option value="">Επιλογή...</option>
                                </select>
                                <button id="addNewInsuranceBtn" class="btn-add">Προσθήκη</button>
                    </div>
                </div>
            </div>

            <div class="card">
                <h3>Ιστορικό Ενεργειών (Undo)</h3>
                <div id="undoHistory"></div>
            </div>
        </div>
    </main>

    <!-- Entry Modal -->
    <div id="entryModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle">Νέα Εγγραφή</h3>
                <button class="modal-close" onclick="document.getElementById('entryModal').classList.remove('active')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="entryForm">
                    <input type="hidden" id="entryId">
                    <div class="form-row">
                        <div class="form-group">
                            <label>Ημερομηνία (ΜΜ/ΕΕΕΕ)*</label>
                            <input type="text" id="entryDate" class="form-input" required>
                        </div>
                        <div class="form-group">
                            <label>Διαγνωστικό*</label>
                            <select id="entrySource" class="form-select" required>
                                <option value="">Επιλογή...</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Ασφάλεια*</label>
                            <select id="entryInsurance" class="form-select" required>
                                <option value="">Επιλογή...</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Τύπος*</label>
                            <select id="entryType" class="form-select" required>
                                <option value="cash">Μετρητά</option>
                                <option value="invoice">Τιμολόγια</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Ποσό (€)*</label>
                        <input type="number" id="entryAmount" class="form-input" step="0.01" min="0" required>
                    </div>
                    
                    <!-- Retention Fields -->
                    <div id="modalRetentionFields" class="retention-fields" style="display: none;">
                        <h4>Κρατήσεις</h4>
                        <div class="form-row">
                            <div class="form-group">
                                <label>Κρατήσεις (€)</label>
                                <input type="number" id="entryRetentionAmount" class="form-input" step="0.01" min="0">
                            </div>
                            <div class="form-group">
                                <label>Κρατήσεις (%)</label>
                                <input type="number" id="entryRetentionPercent" class="form-input" step="0.01" min="0" max="100">
                            </div>
                        </div>
                    </div>

                    <!-- Clawback Fields -->
                    <div id="modalClawbackFields" class="retention-fields" style="display: none;">
                        <h4>Clawback (ΕΟΠΥΥ)</h4>
                        <div class="form-row">
                            <div class="form-group">
                                <label>Clawback (€)</label>
                                <input type="number" id="entryClawbackAmount" class="form-input" step="0.01" min="0">
                            </div>
                            <div class="form-group">
                                <label>Clawback (%)</label>
                                <input type="number" id="entryClawbackPercent" class="form-input" step="0.01" min="0" max="100">
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Σημειώσεις</label>
                        <textarea id="entryNotes" class="form-textarea" rows="3"></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" onclick="document.getElementById('entryModal').classList.remove('active')">Άκυρο</button>
                <button class="btn-primary" onclick="window.saveEntry()">Αποθήκευση</button>
            </div>
        </div>
    </div>

    <!-- Import Backup Modal -->
    <div id="importBackupModal" class="modal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h3>Import Backup</h3>
                <button class="modal-close" onclick="document.getElementById('importBackupModal').classList.remove('active')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="import-mode-selection">
                    <h4>Επιλέξτε Μέθοδο Import</h4>
                    <div class="radio-group">
                        <label class="radio-label">
                            <input type="radio" name="importMode" value="merge" checked>
                            <div class="radio-content">
                                <strong>Merge (Συγχώνευση)</strong>
                                <small>Προσθήκη νέων εγγραφών, ενημέρωση υπαρχόντων</small>
                            </div>
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="importMode" value="overwrite">
                            <div class="radio-content">
                                <strong>Overwrite (Αντικατάσταση)</strong>
                                <small>Διαγραφή όλων και εισαγωγή από backup</small>
                            </div>
                        </label>
                    </div>
                </div>

                <div id="importPreview" style="display: none;">
                    <h4>Preview</h4>
                    <div class="import-preview-info">
                        <div class="preview-section" id="backupInfo">
                            <h5>Backup Info</h5>
                        </div>
                        <div class="preview-section" id="impactInfo">
                            <h5>Επίδραση</h5>
                        </div>
                    </div>
                </div>

                <div id="importReport" style="display: none;">
                    <h4>Αποτελέσματα Import</h4>
                    <div class="import-report-content"></div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" onclick="document.getElementById('importBackupModal').classList.remove('active')">Κλείσιμο</button>
                <button id="confirmImportBtn" class="btn-primary">Επιβεβαίωση Import</button>
            </div>
        </div>
    </div>

    <!-- Notification Toast -->
    <div id="toast" class="toast"></div>

    <!-- Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./service-worker.js')
                    .then(reg => console.log('SW registered:', reg.scope))
                    .catch(err => console.error('SW registration failed:', err));
            });
        }
    </script>

    <script type="module" src="./app.js"></script>
</body>
</html> <button type="button" id="addSourceBtn" class="btn-add">+</button>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Ασφάλεια*</label>
                            <div class="input-with-add">
                                <select id="quickInsurance" class="form-select" required>
                                    <option value="">Επιλογή...</option>
                                </select>
                                <button type="button" id="addInsuranceBtn" class="btn-add">+</button>
                            </div>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Τύπος Είσπραξης*</label>
                            <select id="quickType" class="form-select" required>
                                <option value="cash">Μετρητά (συμπ. κάρτες)</option>
                                <option value="invoice">Τιμολόγια</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Ποσό (€)*</label>
                            <input type="number" id="quickAmount" class="form-input" step="0.01" min="0" required>
                        </div>
                    </div>
                    
                    <!-- ΕΟΠΥΥ Deductions (5 fields) -->
                    <div id="quickEopyyDeductions" class="retention-fields" style="display: none;">
                        <h4>Κρατήσεις ΕΟΠΥΥ (5 πεδία)</h4>
                        <div class="form-row">
                            <div class="form-group">
                                <label>Παρακράτηση (€)</label>
                                <input type="number" id="quickParakratisi" class="form-input" step="0.01" min="0" value="0">
                            </div>
                            <div class="form-group">
                                <label>ΜΔΕ (€)</label>
                                <input type="number" id="quickMDE" class="form-input" step="0.01" min="0" value="0">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>Rebate (€)</label>
                                <input type="number" id="quickRebate" class="form-input" step="0.01" min="0" value="0">
                            </div>
                            <div class="form-group">
                                <label>Κρατήσεις (€)</label>
                                <input type="number" id="quickKrathseisEopyy" class="form-input" step="0.01" min="0" value="0">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>Clawback (€)</label>
                                <input type="number" id="quickClawback" class="form-input" step="0.01" min="0" value="0">
                            </div>
                        </div>
                    </div>

                    <!-- Non-ΕΟΠΥΥ Deductions (1 field) -->
                    <div id="quickNonEopyyDeductions" class="retention-fields" style="display: none;">
                        <h4>Κρατήσεις</h4>
                        <div class="form-row">
                            <div class="form-group">
                                <label>Κρατήσεις (€)</label>
                                <input type="number" id="quickKrathseisOther" class="form-input" step="0.01" min="0" value="0">
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Σημειώσεις</label>
                        <textarea id="quickNotes" class="form-textarea" rows="2"></textarea>
                    </div>
                    <div class="form-actions">
                        <button type="submit" class="btn-primary">Καταχώριση</button>
                    </div>
                </form>
            </div>

            <!-- KPI Cards - ΕΟΠΥΥ Breakdown -->
            <div class="kpi-grid">
                <div class="kpi-card">
                    <div class="kpi-label">Παρακράτηση</div>
                    <div class="kpi-value" id="kpiParakratisi">€ 0,00</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-label">ΜΔΕ</div>
                    <div class="kpi-value" id="kpiMDE">€ 0,00</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-label">Rebate</div>
                    <div class="kpi-value" id="kpiRebate">€ 0,00</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-label">Κρατήσεις</div>
                    <div class="kpi-value" id="kpiKrathseis">€ 0,00</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-label">Clawback</div>
                    <div class="kpi-value" id="kpiClawback">€ 0,00</div>
                </div>
            </div>

            <!-- Recent Entries -->
            <div class="card">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                    <h3>Πρόσφατες Εγγραφές</h3>
                    <button id="exportDashboardPdfBtn" class="btn-secondary btn-sm">📄 Export PDF</button>
                </div>
                <div class="table-responsive">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Ημερομηνία</th>
                                <th>Διαγνωστικό</th>
                                <th>Ασφάλεια</th>
                                <th>Τύπος</th>
                                <th>Ποσό</th>
                            </tr>
                        </thead>
                        <tbody id="recentEntriesBody">
                            <tr><td colspan="5" class="text-center">Δεν υπάρχουν εγγραφές</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Charts -->
            <div class="charts-grid">
                <div class="card">
                    <h3>Έσοδα ανά Τύπο</h3>
                    <canvas id="typeChart"></canvas>
                </div>
                <div class="card">
                    <h3>Μηνιαία Εξέλιξη</h3>
                    <canvas id="monthlyChart"></canvas>
                </div>
            </div>
        </div>

        <!-- Entries View -->
        <div id="entriesView" class="view">
            <div class="view-header">
                <h2>Διαχείριση Εγγραφών</h2>
                <div class="view-actions">
                    <button id="importCsvBtn" class="btn-secondary">📤 Import CSV</button>
                    <button id="exportCsvBtn" class="btn-secondary">📥 Export CSV</button>
                    <button id="exportEntriesPdfBtn" class="btn-secondary">📄 Export PDF</button>
                    <button id="addEntryBtn" class="btn-primary">+ Νέα Εγγραφή</button>
                </div>
            </div>

            <!-- Filters -->
            <div class="card filters-card">
                <div class="form-row">
                    <div class="form-group">
                        <label>Από (ΜΜ/ΕΕΕΕ)</label>
                        <input type="text" id="filterDateFrom" class="form-input" placeholder="01/2025">
                    </div>
                    <div class="form-group">
                        <label>Έως (ΜΜ/ΕΕΕΕ)</label>
                        <input type="text" id="filterDateTo" class="form-input" placeholder="12/2025">
                    </div>
                    <div class="form-group">
                        <label>Διαγνωστικό</label>
                        <select id="filterSource" class="form-select">
                            <option value="">Όλα</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Ασφάλεια</label>
                        <select id="filterInsurance" class="form-select">
                            <option value="">Όλες</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Τύπος</label>
                        <select id="filterType" class="form-select">
                            <option value="">Όλοι</option>
                            <option value="cash">Μετρητά</option>
                            <option value="invoice">Τιμολόγια</option>
                        </select>
                    </div>
                </div>
                <div class="form-actions">
                    <button id="applyFiltersBtn" class="btn-primary">Εφαρμογή Φίλτρων</button>
                    <button id="clearFiltersBtn" class="btn-secondary">Καθαρισμός</button>
                </div>
            </div>

            <!-- Entries Table -->
            <div class="card">
                <div class="table-responsive">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Ημερομηνία</th>
                                <th>Διαγνωστικό</th>
                                <th>Ασφάλεια</th>
                                <th>Τύπος</th>
                                <th>Αρχικό Ποσό</th>
                                <th>Κρατήσεις</th>
                                <th>Τελικό Ποσό</th>
                                <th>Σημειώσεις</th>
                                <th>Ενέργειες</th>
                            </tr>
                        </thead>
                        <tbody id="entriesTableBody">
                            <tr><td colspan="9" class="text-center">Δεν υπάρχουν εγγραφές</td></tr>
                        </tbody>
                    </table>
                </div>
                <div class="pagination" id="pagination"></div>
            </div>
        </div>

        <!-- Settings View -->
        <div id="settingsView" class="view">
            <h2>Ρυθμίσεις</h2>
            
            <div class="card">
                <h3>Διαχείριση Δεδομένων</h3>
                <div class="storage-info" id="storageInfo"></div>
                
                <h4>Backup & Restore</h4>
                <div class="form-actions">
                    <button id="exportBackupBtn" class="btn-primary">💾 Export Backup (JSON)</button>
                    <button id="importBackupBtn" class="btn-secondary">📤 Import Backup</button>
                    <input type="file" id="backupFileInput" accept=".json" style="display: none;">
                    <input type="file" id="csvFileInput" accept=".csv" style="display: none;">
                </div>
                
                <h4>Autosave</h4>
                <div class="autosave-settings">
                    <label class="checkbox-label">
                        <input type="checkbox" id="autosaveEnabled">
                        <span>Ενεργοποίηση Autosave</span>
                    </label>
                    <small class="help-text">Αυτόματη δημιουργία backup.json κάθε 30s</small>
                    <div id="autosaveStatus" class="autosave-status"></div>
                </div>
            </div>

            <div class="card">
                <h3>⚠️ Επικίνδυνη Ζώνη</h3>
                <div style="background-color: #fef2f2; border: 2px solid #ef4444; padding: 1rem; border-radius: 8px; margin-bottom: 1rem;">
                    <p style="color: #991b1b; margin-bottom: 0.5rem;"><strong>ΠΡΟΣΟΧΗ:</strong> Οι ακόλουθες ενέργειες διαγράφουν ΜΟΝΙΜΑ δεδομένα!</p>
                    <small style="color: #b91c1c;">Δημιουργήστε backup πριν προχωρήσετε.</small>
                </div>
                
                <h4>Καθαρισμός Όλων των Δεδομένων</h4>
                <p>Διαγραφή IndexedDB, localStorage, Service Worker cache και όλων των εγγραφών.</p>
                <div class="form-actions">
                    <button id="clearCacheBtn" class="btn-danger">🗑️ Καθαρισμός όλων</button>
                </div>
                <div id="clearCacheReport" class="cache-report"></div>
            </div>

            <div class="card">
                <h3>Διαγνωστικά & Ασφάλειες</h3>
                
                <div class="settings-section">
                    <h4>Διαγνωστικά (Πηγές)</h4>
                    <div class="tags-list" id="sourcesList"></div>
                    <div class="form-group">
                        <input type="text" id="newSourceInput" class="form-input" placeholder="Νέο διαγνωστικό">
                        <button id="addNewSourceBtn" class="btn-add">Προσθήκη</button>
                    </div>
                </div>

                <div class="settings-section">
                    <h4>Ασφάλειες</h4>
                    <div class="tags-list" id="insurancesList"></div>
                    <div class="form-group">
                        <input type="text" id="newInsuranceInput" class="form-input" placeholder="Νέα ασφάλεια">
                        <button id="addNewInsuranceBtn" class="btn-add">Προσθήκη</button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Entry Modal -->
    <div id="entryModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle">Νέα Εγγραφή</h3>
                <button class="modal-close" onclick="document.getElementById('entryModal').classList.remove('active')">&times;</button>
            </div>
            <div class="modal-body">
                <input type="hidden" id="entryId">
                <div class="form-row">
                    <div class="form-group">
                        <label>Ημερομηνία (ΜΜ/ΕΕΕΕ)*</label>
                        <input type="text" id="entryDate" class="form-input" required>
                    </div>
                    <div class="form-group">
                        <label>Διαγνωστικό*</label>
                        <select id="entrySource" class="form-select" required>
                            <option value="">Επιλογή...</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Ασφάλεια*</label>
                        <select id="entryInsurance" class="form-select" required>
                            <option value="">Επιλογή...</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Τύπος*</label>
                        <select id="entryType" class="form-select" required>
                            <option value="cash">Μετρητά</option>
                            <option value="invoice">Τιμολόγια</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label>Ποσό (€)*</label>
                    <input type="number" id="entryAmount" class="form-input" step="0.01" min="0" required>
                </div>
                
                <!-- ΕΟΠΥΥ Deductions -->
                <div id="modalEopyyDeductions" class="retention-fields" style="display: none;">
                    <h4>Κρατήσεις ΕΟΠΥΥ</h4>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Παρακράτηση (€)</label>
                            <input type="number" id="entryParakratisi" class="form-input" step="0.01" min="0" value="0">
                        </div>
                        <div class="form-group">
                            <label>ΜΔΕ (€)</label>
                            <input type="number" id="entryMDE" class="form-input" step="0.01" min="0" value="0">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Rebate (€)</label>
                            <input type="number" id="entryRebate" class="form-input" step="0.01" min="0" value="0">
                        </div>
                        <div class="form-group">
                            <label>Κρατήσεις (€)</label>
                            <input type="number" id="entryKrathseisEopyy" class="form-input" step="0.01" min="0" value="0">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Clawback (€)</label>
                            <input type="number" id="entryClawback" class="form-input" step="0.01" min="0" value="0">
                        </div>
                    </div>
                </div>

                <!-- Non-ΕΟΠΥΥ Deductions -->
                <div id="modalNonEopyyDeductions" class="retention-fields" style="display: none;">
                    <h4>Κρατήσεις</h4>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Κρατήσεις (€)</label>
                            <input type="number" id="entryKrathseisOther" class="form-input" step="0.01" min="0" value="0">
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label>Σημειώσεις</label>
                    <textarea id="entryNotes" class="form-textarea" rows="3"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" onclick="document.getElementById('entryModal').classList.remove('active')">Άκυρο</button>
                <button class="btn-primary" onclick="window.saveEntry()">Αποθήκευση</button>
            </div>
        </div>
    </div>

    <!-- Import Backup Modal -->
    <div id="importBackupModal" class="modal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h3>Import Backup</h3>
                <button class="modal-close" onclick="document.getElementById('importBackupModal').classList.remove('active')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="import-mode-selection">
                    <h4>Επιλέξτε Μέθοδο Import</h4>
                    <div class="radio-group">
                        <label class="radio-label">
                            <input type="radio" name="importMode" value="merge" checked>
                            <div class="radio-content">
                                <strong>Merge (Συγχώνευση)</strong>
                                <small>Προσθήκη νέων εγγραφών, ενημέρωση υπαρχόντων</small>
                            </div>
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="importMode" value="overwrite">
                            <div class="radio-content">
                                <strong>Overwrite (Αντικατάσταση)</strong>
                                <small>Διαγραφή όλων και εισαγωγή από backup</small>
                            </div>
                        </label>
                    </div>
                </div>

                <div id="importPreview" style="display: none;">
                    <h4>Preview</h4>
                    <div class="import-preview-info">
                        <div class="preview-section" id="backupInfo">
                            <h5>Backup Info</h5>
                        </div>
                        <div class="preview-section" id="impactInfo">
                            <h5>Επίδραση</h5>
                        </div>
                    </div>
                </div>

                <div id="importReport" style="display: none;">
                    <h4>Αποτελέσματα Import</h4>
                    <div class="import-report-content"></div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" onclick="document.getElementById('importBackupModal').classList.remove('active')">Κλείσιμο</button>
                <button id="confirmImportBtn" class="btn-primary">Επιβεβαίωση Import</button>
            </div>
        </div>
    </div>

    <!-- Notification Toast -->
    <div id="toast" class="toast"></div>

    <!-- Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./service-worker.js')
                    .then(reg => console.log('SW registered:', reg.scope))
                    .catch(err => console.error('SW registration failed:', err));
            });
        }
    </script>

    <script type="module" src="./app.js"></script>
</body>
</html>
